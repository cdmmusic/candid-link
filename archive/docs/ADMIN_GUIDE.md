# 🔐 관리자 페이지 가이드

캔디드뮤직 링크 데이터베이스 관리 시스템

---

## ✨ 주요 기능

### 1. 대시보드 📊
- **전체 통계**: 앨범 수, 링크 수, 수집 완료율
- **플랫폼별 통계**: 국내/글로벌 플랫폼 링크 수
- **최근 업데이트**: 최근 7일간 업데이트된 앨범 목록
- **실시간 모니터링**: 30초마다 자동 갱신

### 2. 앨범 관리 💿
- **검색**: 아티스트/앨범명으로 빠른 검색
- **필터링**: 수집 상태별 필터 (완료/부분/미수집)
- **페이지네이션**: 50개씩 페이지 단위로 조회
- **수정**: 앨범 기본 정보 및 플랫폼 링크 수정
- **삭제**: 앨범 및 모든 플랫폼 링크 일괄 삭제

### 3. 플랫폼 링크 관리 🎵
- **개별 링크 수정**: 각 플랫폼별 URL 수동 입력
- **상태 표시**: 수집됨/미수집 상태 실시간 확인
- **17개 플랫폼 지원**: Melon, Spotify, Apple Music 등

---

## 🚀 빠른 시작

### 1. 서버 실행

```bash
# 관리자 페이지 서버 시작
python3 admin_api.py
```

**서버 주소**: http://localhost:5003

### 2. 로그인

- **URL**: http://localhost:5003/admin/login
- **아이디**: `admin`
- **비밀번호**: `cdm2025!@#`

> ⚠️ **보안 주의**: 프로덕션 환경에서는 반드시 `.env` 파일의 비밀번호를 변경하세요!

---

## 📂 파일 구조

```
release-album-link/
├── admin_api.py                 # 관리자 API 서버
├── templates/
│   └── admin/
│       ├── login.html          # 로그인 페이지
│       ├── layout.html         # 공통 레이아웃
│       ├── dashboard.html      # 대시보드
│       ├── albums_list.html    # 앨범 목록
│       └── album_edit.html     # 앨범 수정
├── .env                        # 환경 변수 (관리자 계정 정보)
└── album_links.db              # SQLite 데이터베이스
```

---

## ⚙️ 환경 설정

`.env` 파일에서 관리자 계정 설정:

```env
# Admin Panel Configuration
ADMIN_USERNAME=admin
ADMIN_PASSWORD=cdm2025!@#
ADMIN_SECRET_KEY=your-secret-key-change-this-in-production
```

### 비밀번호 변경 방법

1. `.env` 파일 열기
2. `ADMIN_PASSWORD` 값 변경
3. 서버 재시작

---

## 📊 주요 API 엔드포인트

### 인증
- `POST /admin/login` - 로그인
- `GET /admin/logout` - 로그아웃

### 대시보드
- `GET /admin/dashboard` - 대시보드 페이지
- `GET /admin/api/stats` - 전체 통계
- `GET /admin/api/recent-updates` - 최근 업데이트

### 앨범 관리
- `GET /admin/albums` - 앨범 목록 페이지
- `GET /admin/api/albums` - 앨범 목록 API (검색, 필터, 페이지네이션)
- `GET /admin/api/albums/:id` - 앨범 상세 정보
- `PUT /admin/api/albums/:id` - 앨범 정보 수정
- `DELETE /admin/api/albums/:id` - 앨범 삭제

### 플랫폼 링크
- `PUT /admin/api/platforms/:id` - 플랫폼 링크 수정

---

## 💡 사용 팁

### 1. 앨범 검색
- 검색창에 아티스트명 또는 앨범명 입력
- 500ms 디바운스 적용 (타이핑 후 0.5초 대기)
- 한글/영문 모두 검색 가능

### 2. 상태 필터
- **전체 상태**: 모든 앨범 표시
- **수집 완료**: 17개 플랫폼 모두 링크가 있는 앨범
- **부분 수집**: 일부 플랫폼만 링크가 있는 앨범
- **미수집**: 링크가 하나도 없는 앨범

### 3. 앨범 정보 수정
1. 앨범 목록에서 "수정" 버튼 클릭
2. 기본 정보 수정 (영문명, 발매일, 커버 URL 등)
3. "정보 저장" 버튼 클릭

### 4. 플랫폼 링크 수정
1. 앨범 수정 페이지에서 플랫폼 링크 섹션으로 이동
2. URL 입력란에 플랫폼 링크 입력
3. 각 플랫폼별 "저장" 버튼 클릭

### 5. 앨범 삭제
1. 앨범 수정 페이지 하단의 "앨범 삭제" 버튼 클릭
2. 2번의 확인 메시지 승인
3. 앨범 및 모든 플랫폼 링크 삭제

---

## 🔒 보안 기능

### 1. 세션 기반 인증
- Flask Session을 사용한 안전한 인증
- 로그인 필수 (login_required 데코레이터)

### 2. 환경 변수 관리
- `.env` 파일로 민감 정보 관리
- Git에 업로드되지 않도록 `.gitignore` 설정 필수

### 3. SQL Injection 방지
- Parameterized Query 사용
- 모든 데이터베이스 쿼리 안전성 보장

---

## 📈 통계 정보

대시보드에서 확인할 수 있는 통계:

1. **전체 앨범**: 데이터베이스에 등록된 총 앨범 수
2. **전체 링크**: 모든 플랫폼 링크 레코드 수
3. **수집된 링크**: `found=1`인 링크 수
4. **수집 완료율**: (수집된 링크 / 전체 링크) × 100
5. **최근 7일 업데이트**: 지난 7일간 업데이트된 앨범 수
6. **커버 이미지 있음**: 앨범 커버 URL이 있는 앨범 수

---

## 🛠️ 트러블슈팅

### 문제: 서버가 시작되지 않음
**해결**:
```bash
# 포트 5003이 이미 사용 중인지 확인
lsof -i :5003

# 프로세스 종료
kill -9 <PID>
```

### 문제: 로그인할 수 없음
**해결**:
1. `.env` 파일에 관리자 계정 정보 확인
2. `ADMIN_USERNAME`, `ADMIN_PASSWORD` 값 확인
3. 서버 재시작

### 문제: 데이터베이스를 찾을 수 없음
**해결**:
1. `album_links.db` 파일이 프로젝트 루트에 있는지 확인
2. `admin_api.py`의 `DB_PATH` 경로 확인

### 문제: 통계가 로드되지 않음
**해결**:
1. 브라우저 콘솔에서 에러 확인 (F12)
2. API 응답 확인: http://localhost:5003/admin/api/stats
3. 데이터베이스 연결 확인

---

## 🔄 업데이트 예정 기능

### Phase 4: 플랫폼 링크 관리 (다음 단계)
- [ ] 플랫폼별 필터링
- [ ] 링크 일괄 재수집
- [ ] CSV 내보내기

### Phase 5: 데이터 작업 도구
- [ ] Excel 파일 업로드
- [ ] 중복 데이터 정리
- [ ] 수집 모니터링

### Phase 6: 시스템 설정
- [ ] 플랫폼 우선순위 설정
- [ ] 자동 수집 스케줄
- [ ] 데이터베이스 백업

---

## 📞 문의

문제 발생 시 GitHub Issues에 등록해주세요.

---

**만든 사람**: Candid Music Entertainment
**버전**: 1.0.0 (MVP)
**마지막 업데이트**: 2025-10-26

---

## 🎯 현재 상태

✅ **Phase 1 완료**: 관리자 인증 시스템
✅ **Phase 2 완료**: 대시보드 및 통계
✅ **Phase 3 완료**: 앨범 관리 (CRUD)
✅ **Phase 4 완료**: 플랫폼 링크 관리
✅ **Phase 5 완료**: 데이터 작업 도구
⏳ **Phase 6 예정**: 시스템 설정

**총 개발 시간**: 약 4시간 (Phase 1~5 완성)
